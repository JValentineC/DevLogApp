const p="https://devlogs-api.nfshost.com/api";class r extends Error{status;response;constructor(t,s,o){super(t),this.name="ApiError",this.status=s,this.response=o}}function u(){return localStorage.getItem("authToken")}async function a(e,t={}){const s=`${p}${e}`,o={"Content-Type":"application/json"},i=u();i&&(o.Authorization=`Bearer ${i}`);const d={...{headers:o},...t,headers:{...o,...t.headers||{}}};try{const n=await fetch(s,d),c=await n.json();if(!n.ok)throw n.status===401&&c.error?.includes("expired")?(localStorage.removeItem("authToken"),localStorage.removeItem("user"),new r("Your session has expired. Please login again.",401,c)):new r(c.error||`HTTP ${n.status}: ${n.statusText}`,n.status,c);return c}catch(n){throw n instanceof r?n:new r(n instanceof Error?n.message:"Network error occurred",0)}}const h={async create(e){const t=await a("/devlogs",{method:"POST",body:JSON.stringify(e)});if(!t.success||!t.data)throw new r(t.error||"Failed to create dev log",500,t);return t.data},async getAll(e){const t=new URLSearchParams;e?.published!==void 0&&t.append("published",e.published.toString()),e?.userId!==void 0&&t.append("userId",e.userId.toString()),e?.limit&&t.append("limit",e.limit.toString()),e?.offset&&t.append("offset",e.offset.toString());const s=`/devlogs${t.toString()?`?${t.toString()}`:""}`,o=await a(s);if(!o.success||!o.entries)throw new r(o.error||"Failed to fetch dev logs",500,o);return{entries:o.entries,count:o.count||0}},async getById(e){const t=await a(`/devlogs/${e}`);if(!t.success||!t.data)throw new r(t.error||"Failed to fetch dev log",404,t);return t.data},async update(e,t){const s=await a(`/devlogs/${e}`,{method:"PUT",body:JSON.stringify(t)});if(!s.success||!s.data)throw new r(s.error||"Failed to update dev log",500,s);return s.data},async delete(e){const t=await a(`/devlogs/${e}`,{method:"DELETE"});if(!t.success)throw new r(t.error||"Failed to delete dev log",500,t)},async healthCheck(){try{const e=await a("/health");return e.success&&e.data?.status==="OK"}catch{return!1}}},w={async getAll(){const e=await a("/admin/users");if(!e.success||!e.users)throw new r(e.error||"Failed to fetch users",500,e);return{users:e.users,count:e.count||0}},async create(e){const t=await a("/admin/users",{method:"POST",body:JSON.stringify(e)});if(!t.success||!t.data)throw new r(t.error||"Failed to create user",500,t);return t.data},async updateRole(e,t){const s=await a(`/admin/users/${e}/role`,{method:"PATCH",body:JSON.stringify({role:t})});if(!s.success||!s.data)throw new r(s.error||"Failed to update user role",500,s);return s.data},async delete(e){const t=await a(`/admin/users/${e}`,{method:"DELETE"});if(!t.success)throw new r(t.error||"Failed to delete user",500,t)},async resetPassword(e){const t=await a(`/admin/reset-password/${e}`,{method:"POST"});if(!t.success||!t.tempPassword)throw new r(t.error||"Failed to reset password",500,t);return{tempPassword:t.tempPassword}}},g={async getAll(e){const t=new URLSearchParams;e?.cycleId&&t.append("cycleId",e.cycleId.toString()),e?.isCaptain!==void 0&&t.append("isCaptain",e.isCaptain.toString()),e?.search&&t.append("search",e.search),e?.status&&t.append("status",e.status),e?.limit&&t.append("limit",e.limit.toString()),e?.offset&&t.append("offset",e.offset.toString());const s=`/people${t.toString()?`?${t.toString()}`:""}`,o=await a(s);if(!o.success||!o.people)throw new r(o.error||"Failed to fetch people",500,o);return{people:o.people,count:o.count||0}}},f={async getAll(){const e=await a("/cycles");if(!e.success||!e.cycles)throw new r(e.error||"Failed to fetch cycles",500,e);return{cycles:e.cycles,count:e.count||0}}};export{r as A,f as c,h as d,g as p,w as u};
